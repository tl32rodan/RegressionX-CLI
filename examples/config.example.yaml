# Schema version for compatibility checks
schema_version: 1

# Paths are templates expanded with case parameters
paths:
  code_root: "{code_root}"            # injected via CLI args
  workspace_root: "work/{case_id}/{version}"
  artifacts_root: "artifacts/{case_id}/{version}"

versions:
  baseline: "{baseline_path}"
  candidate: "{candidate_path}"

cmd_templates:
  preprocess: |
    ./scripts/preprocess.sh --case {case_id} --cell {params.cell} --pvt {params.pvt}
  run: |
    ./bin/run_flow --cell {params.cell} --pvt {params.pvt} --workdir {workspace_root}
  compare: |
    regx diff --left {artifacts_root.replace("{version}", "baseline")} --right {artifacts_root.replace("{version}", "candidate")}

reporting:
  global_report: "reports/global"
  case_report: "reports/cases/{case_id}"
  formats: [json, md]

filters:
  include:
    - "**/*"
  ignore:
    - "**/tmp/**"
    - "**/*.log"
    - "**/.git/**"
  extra_ignore_allowed: true

cases:
  - case_id: rsa_vector_small
    params:
      cell: rsa
      pvt: ss_0p8_125c
    metadata:
      owner: alice
    extra_ignore:
      - "**/timing/**"
  - case_id: aes_vector_typ
    params:
      cell: aes
      pvt: tt_1p0_25c
    metadata:
      owner: bob
