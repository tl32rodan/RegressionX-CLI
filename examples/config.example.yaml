# Schema version for compatibility checks
schema_version: 1

# Paths are templates expanded with case and version identifiers
paths:
  workspace_root: "work/{case_id}/{version}"
  artifacts_root: "artifacts/{case_id}/{version}"

versions:
  baseline: "baseline"
  candidate: "candidate"

cmd_templates:
  preprocess: |
    python -c "from pathlib import Path; root = Path('{workspace_root}'); root.mkdir(parents=True, exist_ok=True); (root / 'note.txt').write_text('prep-{case_id}-{version}')"
  run: |
    python -c "from pathlib import Path; root = Path('{artifacts_root}'); (root / 'outputs').mkdir(parents=True, exist_ok=True); (root / 'outputs' / 'result.txt').write_text('{params_cell}-{version_label}'); (root / 'summary.txt').write_text('summary-{case_id}-{version_label}')"
  postprocess: |
    python -c "print('postprocess {case_id} {version_label}')"
  compare: |
    python -c "print('compare {case_id} {artifacts_root_baseline} {artifacts_root_candidate}')"

reporting:
  global_report: "reports/global"
  case_report: "reports/cases/{case_id}"
  formats: [json, md]

filters:
  include:
    - "**/*"
  ignore:
    - "**/tmp/**"
    - "**/*.log"
    - "**/.git/**"
  extra_ignore_allowed: true

cases:
  - case_id: rsa_vector_small
    params:
      cell: rsa
      pvt: ss_0p8_125c
    metadata:
      owner: alice
    extra_ignore:
      - "**/timing/**"
  - case_id: aes_vector_typ
    params:
      cell: aes
      pvt: tt_1p0_25c
    metadata:
      owner: bob
